# Rime schema
# encoding: utf-8

schema:
  schema_id: apl_boot
  name: "APL Boot"
  version: "0.1.0"
  author:
    - zmg <moonpostman3@gmail.com>
  description: |
    For booting the apl schema, which needs the 
    prism generated by this schema.
    requires font "APL385 Unicode" (available at 
    https://www.dyalog.com/apl-font-keyboard.htm)

switches:
  - name: ascii_mode
    reset: 0
    states: [ ‚çã, A ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - fallback_segmentor
  translators:
    - script_translator
    - echo_translator

speller:
  alphabet: abcdefghijklmnopqrstuvwxyz<>-
  delimiter:  ' '

translator:
  dictionary: apl
  prism: apl_abc
  enable_user_dict: false
  spelling_hints: 2
  preedit_format: {}
  comment_format:
    - xform/^(.*)/  $1/

key_binder:
  bindings:
    - {accept: "Control+p", send: Up, when: composing}
    - {accept: "Control+n", send: Down, when: composing}
    - {accept: "Control+b", send: Left, when: composing}
    - {accept: "Control+f", send: Right, when: composing}
    - {accept: "Control+a", send: Home, when: composing}
    - {accept: "Control+e", send: End, when: composing}
    - {accept: "Control+d", send: Delete, when: composing}
    - {accept: "Control+k", send: "Shift+Delete", when: composing}
    - {accept: "Control+h", send: BackSpace, when: composing}
    - {accept: "Control+g", send: Escape, when: composing}
    - {accept: "Control+bracketleft", send: Escape, when: composing}
    - {accept: "Alt+v", send: Page_Up, when: composing}
    - {accept: "Control+v", send: Page_Down, when: composing}

editor:
  bindings:
    Return: confirm
    Tab: confirm
    space: commit_raw_input

recognizer:
  import_preset: default

ascii_composer:
  good_old_caps_lock: true
  switch_key:
    Shift_L: noop
    Shift_R: noop
    Control_L: inline_ascii
    Control_R: commit_text
    Caps_Lock: clear

style:
  font_face: "APL385 Unicode"
